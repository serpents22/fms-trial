<template>
  <sideNav :isSettingActive="true" />
  <div class="content">
    <div class="navigation">
      <LargeChip :tabs="tabs" @clicked="changeNavigation" />
    </div>
    <div class="ml-[180px] w-full">
      <component :is="selectedComponent" />
    </div>
  </div>
</template>     
         
<script>
import LargeChip from '@/components/tab/LargeChip.vue'
import UsersSetting from './Users/UsersSetting.vue'
import OperationalSetting from './Operational/OperationalSetting.vue'
import DevicesSetting from './Devices/DevicesSetting.vue'
import GeofenceSetting from './Geofence/GeofenceSetting.vue'
import DeviceInfo from '@/views/Devices/DeviceInfo.vue'
import EditDevice from '@/views/Devices/EditDevice.vue'
import sideNav from '@/components/navigation/sideNav.vue'
import Button from '@/components/button/BaseButton.vue'
import SearchBar from '@/components/SearchBar.vue'
import { onMounted, ref } from 'vue'
import { useLocalStorage } from '@vueuse/core'

export default {
  components: {
    LargeChip, OperationalSetting, DeviceInfo, EditDevice, sideNav, Button, SearchBar, DevicesSetting, UsersSetting, GeofenceSetting
  },
  props: ['id'],

  setup(props) {
    const selectedComponent = useLocalStorage('SelectedSetting', 'OperationalSetting')
    const tabs = [
      {
        title: 'Operational',
        value: 'OperationalSetting',
        icon: "M14.9999 4.31641C15.3061 4.31645 15.6016 4.42885 15.8304 4.6323C16.0592 4.83575 16.2053 5.11609 16.2412 5.42016L16.2499 5.56641V25.5664C16.2496 25.885 16.1276 26.1914 15.9088 26.4231C15.6901 26.6548 15.3912 26.7942 15.0732 26.8129C14.7551 26.8315 14.4419 26.7281 14.1976 26.5236C13.9533 26.3191 13.7963 26.029 13.7587 25.7127L13.7499 25.5664V5.56641C13.7499 5.23489 13.8816 4.91694 14.116 4.68252C14.3504 4.4481 14.6684 4.31641 14.9999 4.31641ZM9.99991 8.06641C10.3061 8.06645 10.6016 8.17885 10.8304 8.3823C11.0592 8.58575 11.2053 8.86609 11.2412 9.17016L11.2499 9.31641V21.8164C11.2496 22.135 11.1276 22.4414 10.9088 22.6731C10.6901 22.9048 10.3912 23.0442 10.0732 23.0629C9.75511 23.0815 9.44193 22.9781 9.19762 22.7736C8.9533 22.5691 8.79629 22.279 8.75866 21.9627L8.74991 21.8164V9.31641C8.74991 8.98489 8.88161 8.66694 9.11603 8.43252C9.35045 8.1981 9.66839 8.06641 9.99991 8.06641ZM19.9999 8.06641C20.3061 8.06645 20.6016 8.17885 20.8304 8.3823C21.0592 8.58575 21.2053 8.86609 21.2412 9.17016L21.2499 9.31641V21.8164C21.2496 22.135 21.1276 22.4414 20.9088 22.6731C20.6901 22.9048 20.3912 23.0442 20.0732 23.0629C19.7551 23.0815 19.4419 22.9781 19.1976 22.7736C18.9533 22.5691 18.7963 22.279 18.7587 21.9627L18.7499 21.8164V9.31641C18.7499 8.98489 18.8816 8.66694 19.116 8.43252C19.3504 8.1981 19.6684 8.06641 19.9999 8.06641ZM4.99991 11.8164C5.30608 11.8164 5.60158 11.9289 5.83037 12.1323C6.05917 12.3357 6.20534 12.6161 6.24116 12.9202L6.24991 13.0664V18.0664C6.24956 18.385 6.12756 18.6914 5.90885 18.9231C5.69014 19.1548 5.39122 19.2942 5.07317 19.3129C4.75511 19.3315 4.44193 19.2281 4.19762 19.0236C3.9533 18.8191 3.79629 18.529 3.75866 18.2127L3.74991 18.0664V13.0664C3.74991 12.7349 3.8816 12.4169 4.11602 12.1825C4.35045 11.9481 4.66839 11.8164 4.99991 11.8164ZM24.9999 11.8164C25.3061 11.8164 25.6016 11.9289 25.8304 12.1323C26.0592 12.3357 26.2053 12.6161 26.2412 12.9202L26.2499 13.0664V18.0664C26.2496 18.385 26.1276 18.6914 25.9089 18.9231C25.6901 19.1548 25.3912 19.2942 25.0732 19.3129C24.7551 19.3315 24.4419 19.2281 24.1976 19.0236C23.9533 18.8191 23.7963 18.529 23.7587 18.2127L23.7499 18.0664V13.0664C23.7499 12.7349 23.8816 12.4169 24.116 12.1825C24.3504 11.9481 24.6684 11.8164 24.9999 11.8164Z"
      },
      {
        title: 'Devices',
        value: 'DevicesSetting',
        icon: "M26.2124 7.89031L15.8999 2.24773C15.6244 2.09548 15.3147 2.01562 14.9999 2.01562C14.6851 2.01562 14.3754 2.09548 14.0999 2.24773L3.78741 7.89265C3.4929 8.05379 3.24706 8.29105 3.07556 8.57964C2.90405 8.86823 2.81317 9.19757 2.81241 9.53328V20.7411C2.81317 21.0768 2.90405 21.4061 3.07556 21.6947C3.24706 21.9833 3.4929 22.2206 3.78741 22.3817L14.0999 28.0266C14.3754 28.1789 14.6851 28.2587 14.9999 28.2587C15.3147 28.2587 15.6244 28.1789 15.8999 28.0266L26.2124 22.3817C26.5069 22.2206 26.7528 21.9833 26.9243 21.6947C27.0958 21.4061 27.1866 21.0768 27.1874 20.7411V9.53445C27.1873 9.19815 27.0967 8.86807 26.9252 8.57881C26.7536 8.28954 26.5074 8.05174 26.2124 7.89031ZM14.9999 14.2009L5.58389 9.04461L14.9999 3.88836L24.4159 9.04461L14.9999 14.2009ZM15.9374 25.8774V15.8216L25.3124 10.6911V20.7411L15.9374 25.8774Z"
      },
      {
        title: 'Users',
        value: 'UsersSetting',
        icon: "M16 8C14.917 8 13.8784 8.43021 13.1126 9.19598C12.3469 9.96175 11.9167 11.0004 11.9167 12.0833C11.9167 13.1663 12.3469 14.2049 13.1126 14.9707C13.8784 15.7365 14.917 16.1667 16 16.1667C17.083 16.1667 18.1216 15.7365 18.8874 14.9707C19.6531 14.2049 20.0833 13.1663 20.0833 12.0833C20.0833 11.0004 19.6531 9.96175 18.8874 9.19598C18.1216 8.43021 17.083 8 16 8ZM16 10.3333C16.4641 10.3333 16.9092 10.5177 17.2374 10.8459C17.5656 11.1741 17.75 11.6192 17.75 12.0833C17.75 12.5475 17.5656 12.9926 17.2374 13.3208C16.9092 13.649 16.4641 13.8333 16 13.8333C15.5359 13.8333 15.0908 13.649 14.7626 13.3208C14.4344 12.9926 14.25 12.5475 14.25 12.0833C14.25 11.6192 14.4344 11.1741 14.7626 10.8459C15.0908 10.5177 15.5359 10.3333 16 10.3333ZM8.41667 11.5C7.64312 11.5 6.90125 11.8073 6.35427 12.3543C5.80729 12.9013 5.5 13.6431 5.5 14.4167C5.5 15.5133 6.11833 16.4583 7.005 16.96C7.425 17.1933 7.90333 17.3333 8.41667 17.3333C8.93 17.3333 9.40833 17.1933 9.82833 16.96C10.26 16.715 10.6217 16.365 10.89 15.945C10.0401 14.8373 9.58062 13.4795 9.58333 12.0833V11.7567C9.23333 11.5933 8.83667 11.5 8.41667 11.5ZM23.5833 11.5C23.1633 11.5 22.7667 11.5933 22.4167 11.7567V12.0833C22.4167 13.4833 21.9617 14.8367 21.11 15.945C21.25 16.1667 21.4017 16.3417 21.5767 16.5167C22.1147 17.0383 22.834 17.331 23.5833 17.3333C24.0967 17.3333 24.575 17.1933 24.995 16.96C25.8817 16.4583 26.5 15.5133 26.5 14.4167C26.5 13.6431 26.1927 12.9013 25.6457 12.3543C25.0987 11.8073 24.3569 11.5 23.5833 11.5ZM16 18.5C13.27 18.5 7.83333 19.865 7.83333 22.5833V24.3333H24.1667V22.5833C24.1667 19.865 18.73 18.5 16 18.5ZM7.495 19.1417C5.24333 19.41 2 20.5533 2 22.5833V24.3333H5.5V22.0817C5.5 20.9033 6.305 19.9233 7.495 19.1417ZM24.505 19.1417C25.695 19.9233 26.5 20.9033 26.5 22.0817V24.3333H30V22.5833C30 20.5533 26.7567 19.41 24.505 19.1417ZM16 20.8333C17.785 20.8333 19.78 21.4167 20.935 22H11.065C12.22 21.4167 14.215 20.8333 16 20.8333Z"
      },
      {
        title: 'Geofence',
        value: 'GeofenceSetting',
        icon: "M16.384 27.878L16.3867 27.8767L16.3933 27.872L16.4133 27.8567L16.492 27.8C16.5587 27.7507 16.656 27.6787 16.7787 27.584C17.024 27.396 17.372 27.1193 17.7873 26.764C18.8776 25.8321 19.8971 24.8204 20.8373 23.7373C23.0427 21.1867 25.3333 17.5467 25.3333 13.384C25.3333 10.8973 24.3507 8.51067 22.6013 6.75067C21.7367 5.87959 20.7083 5.18812 19.5754 4.71605C18.4424 4.24398 17.2273 4.00063 16 4C14.7727 4.00054 13.5576 4.24379 12.4247 4.71574C11.2918 5.1877 10.2634 5.87905 9.39866 6.75C7.64761 8.51402 6.66548 10.8991 6.66666 13.3847C6.66666 17.5467 8.95732 21.1867 11.1627 23.7373C12.1029 24.8204 13.1224 25.8321 14.2127 26.764C14.6287 27.1193 14.976 27.396 15.2213 27.584C15.3417 27.6767 15.4632 27.7679 15.586 27.8573L15.6073 27.872L15.6133 27.8767L15.616 27.878C15.846 28.04 16.154 28.04 16.384 27.878ZM19.3333 13.3333C19.3333 14.2174 18.9821 15.0652 18.357 15.6904C17.7319 16.3155 16.884 16.6667 16 16.6667C15.1159 16.6667 14.2681 16.3155 13.643 15.6904C13.0178 15.0652 12.6667 14.2174 12.6667 13.3333C12.6667 12.4493 13.0178 11.6014 13.643 10.9763C14.2681 10.3512 15.1159 10 16 10C16.884 10 17.7319 10.3512 18.357 10.9763C18.9821 11.6014 19.3333 12.4493 19.3333 13.3333Z"
      }
    ]

    function changeNavigation(navigation) {
      var subNavs = document.getElementsByClassName("largeNav")
      console.log(subNavs)
      for (var i of subNavs) {
        i.classList.remove("active");
      }
      console.log(navigation)
      // event.target.classList.add("active")
      event.target.className += " active"
      selectedComponent.value = navigation
    }

    onMounted(async () => {
      var element = document.getElementById(selectedComponent.value)
      element.classList.add("active")
    })

    return {
      selectedComponent,
      tabs,
      changeNavigation
    }
  }
}

</script>
        
<style scoped>
.content {
  @apply relative w-full h-full ml-[47px] pt-[80px] pb-6 px-6 flex gap-6
}

.form {
  box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.25);
  @apply w-full rounded-lg bg-white p-8
}

.navigation {
  @apply border-r pr-6 overflow-y-auto overflow-x-clip fixed z-10 h-screen 
}
</style>